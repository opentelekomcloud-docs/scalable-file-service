:original_name: sfs_02_0031.html

.. _sfs_02_0031:

Querying File System Access Rules
=================================

Function
--------

This API is used to query the access rules of a shared file system.

URI
---

-  POST /v2/{project_id}/shares/{share_id}/action
-  Parameter description

   ========== ========= ====== ===========================================
   Parameter  Mandatory Type   Description
   ========== ========= ====== ===========================================
   share_id   Yes       String Specifies the ID of the shared file system.
   project_id Yes       String Specifies the project ID of the operator.
   ========== ========= ====== ===========================================

Request
-------

-  Parameter description

   +----------------+-----------+--------+--------------------------------------------------------------------------------------------+
   | Parameter      | Mandatory | Type   | Description                                                                                |
   +================+===========+========+============================================================================================+
   | os-access_list | Yes       | Object | Specifies the **os-access_list** object. To view access rules, set this value to **null**. |
   +----------------+-----------+--------+--------------------------------------------------------------------------------------------+

   .. note::

      If the API version ranges from 1.0 to 2.6, the top-layer parameters of the request body in the JSON format use prefix **os-**. If the API version is later than 2.6, prefix **os-** must be removed.

-  Example request

   .. code-block::

      {
          "os-access_list": null
      }

Response
--------

-  Description

   =========== ================ =======================
   Parameter   Type             Description
   =========== ================ =======================
   access_list Array of objects Lists the access rules.
   =========== ================ =======================

-  Description of field **access_list**

   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter    | Type   | Description                                                                                                                                                                                                                                                                                                         |
   +==============+========+=====================================================================================================================================================================================================================================================================================================================+
   | access_type  | String | Specifies the type of the access rule.                                                                                                                                                                                                                                                                              |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | access_to    | String | Specifies the object that the backend grants or denies access.                                                                                                                                                                                                                                                      |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | access_level | String | Specifies the level of the access rule.                                                                                                                                                                                                                                                                             |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | state        | String | Specifies the status of the access rule. If the API version is earlier than 2.28, the status of the access rule is **new**, **active**, or **error**. In versions from 2.28 to 2.42, the status of the access rule is **queued_to_apply**, **applying**, **active**, **error**, **queued_to_deny**, or **denying**. |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id           | String | Specifies the ID of the access rule.                                                                                                                                                                                                                                                                                |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | created_at   | String | Specifies the time when the access rule was created. This parameter exists only when the value of **X-Openstack-Manila-Api-Version** in the request header is greater than or equal to 2.33.                                                                                                                        |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | updated_at   | String | Specifies the time when the access rule was updated. This parameter exists only when the value of **X-Openstack-Manila-Api-Version** in the request header is greater than or equal to 2.33.                                                                                                                        |
   +--------------+--------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

-  Example response

   .. code-block::

      {
        "access_list": [
          {
            "access_level": "rw",
            "state": "active",
            "id": "85417bed-5e26-4c99-8c0c-92c95b5c640e",
            "access_type": "cert",
            "access_to": "a91556b7-c7c8-4273-915e-2729e04cdb01",
            "created_at": "2017-07-07T03:15:06.858662",
            "updated_at": "2018-07-07T03:15:06.858662"
          },
          {
            "access_level": "rw",
            "state": "active",
            "id": "2ecbeb0b-b2ba-41f1-ba63-0666548925b9",
            "access_type": "cert",
            "access_to": "0560a527-0e77-40a6-aa3b-110beecad368#0.0.0.0/0#0#all_squash,root_squash",
            "created_at": "2017-07-07T03:15:06.858662",
            "updated_at": "2018-07-07T03:15:06.858662"
          },
          {
            "access_level": "rw",
            "state": "active",
            "id": "24615391-d58d-4a74-ac5a-520233c9c396",
            "access_type": "cert",
            "access_to": "0560a527-0e77-40a6-aa3b-110beecad368#192.168.196.47#1#all_squash,root_squash",
            "created_at": "2017-07-07T03:15:06.858662",
            "updated_at": "2018-07-07T03:15:06.858662"
          }
        ]
      }

Status Codes
------------

-  Normal

   200

-  Abnormal

   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | Status Code                       | Description                                                                                |
   +===================================+============================================================================================+
   | 400 Bad Request                   | The server failed to process the request.                                                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 401 Unauthorized                  | You must enter a username and the password to access the requested page.                   |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 403 Forbidden                     | Access to the requested page is forbidden.                                                 |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 404 Not Found                     | The requested page was not found.                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 405 Method Not Allowed            | You are not allowed to use the method specified in the request.                            |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 406 Not Acceptable                | The response generated by the server could not be accepted by the client.                  |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 407 Proxy Authentication Required | You must use the proxy server for authentication. Then the request can be processed.       |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 408 Request Timeout               | The request timed out.                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 409 Conflict                      | The request could not be processed due to a conflict.                                      |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 500 Internal Server Error         | Failed to complete the request because of an internal service error.                       |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 501 Not Implemented               | Failed to complete the request because the server does not support the requested function. |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 502 Bad Gateway                   | Failed to complete the request because the request is invalid.                             |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 503 Service Unavailable           | Failed to complete the request because the service is unavailable.                         |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
   | 504 Gateway Timeout               | A gateway timeout error occurred.                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------+
